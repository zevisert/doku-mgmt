apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component
metadata:
  annotations:
    config.kubernetes.io/local-config: "true"
namespace: ingress-nginx
configMapGenerator:
# https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/
- name: ingress-nginx-controller
  namespace: ingress-nginx
  behavior: merge
  literals:
  - use-proxy-protocol="true"
  - real-ip-header=proxy_protocol
patches:
- path: service-patch.yaml
  target:
    kind: Service
    name: ingress-nginx-controller
generatorOptions:
  disableNameSuffixHash: true
